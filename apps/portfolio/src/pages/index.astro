---
import { ContactCard } from '@/components/contact-me'
import GitHub from '@/components/icons/github.svg'
import Linkedin from '@/components/icons/linkedin.svg'
import Pdf from '@/components/icons/pdf.svg'
import { JobBubble } from '@/components/job-bubble'
import { Section } from '@/components/section'
import { SkillBubble } from '@/components/skill-bubble'
import { logVisit } from '@/lib/analytics-server'
import { jobs } from '@/lib/jobs'
import { skills } from '@/lib/skills'
import Layout from '@/pages/_layout.astro'
import {
	LinkButton,
	ScrollButton,
} from '@aamini/ui/neobrutalist/components/button'
import { ArrowDown } from 'lucide-react'

export const prerender = false

const ref = Astro.url.searchParams.get('ref')

if (ref) {
	logVisit(ref)
}
---

<Layout>
	{/* Navigation Header */}
	<header
		class="bg-background h-(--header-size) sticky top-0 z-10 mb-1 flex w-full items-end px-4"
	>
		<div
			class="box-shadow font-heading border-border bg-secondary-background flex h-fit flex-1 items-center justify-end gap-4 rounded-lg border-2 px-6 py-2"
		>
			<LinkButton
				href="https://github.com/aamini11"
				size="icon"
				variant="neutral"
			>
				<GitHub />
			</LinkButton>
			<LinkButton
				href="https://linkedin.com/in/aria-amini"
				size="icon"
				variant="neutral"
			>
				<Linkedin />
			</LinkButton>
		</div>
	</header>

	<main>
		{/* Hero/Intro */}
		<header
			id="intro"
			class="flex min-h-[calc(100vh_-_var(--header-size))] items-center justify-center p-6"
		>
			<hgroup class="flex max-w-lg flex-col items-start">
				<h1 class="flex flex-col items-start gap-2">
					<span class="text-center font-mono"> Hello, my name is... </span>
					<b class="text-7xl">Aria Amini</b>
				</h1>
				<p class="text-foreground/40 mt-4 inline">
					I&apos;m a Full-Stack Software Engineer with{' '}
					<b class="text-foreground/60">7 Years of Professional</b>{' '}
					experience building web applications.
				</p>
				<div class="mt-6 flex items-center justify-center gap-4">
					<ScrollButton
						client:load
						scrollToId="experience"
						size="lg"
						variant="default"
						className="px-4"
					>
						About Me <ArrowDown className="inline animate-bounce" />
					</ScrollButton>
					<LinkButton
						download={true}
						href="/Aria_Amini_Resume.pdf"
						size="lg"
						variant="default"
						className="px-4"
					>
						<Pdf width={20} height={20} class="inline" />
						Resume (.pdf)
					</LinkButton>
				</div>
			</hgroup>
		</header>

		{/* Experience */}
		<Section
			title="Experience"
			id="experience"
			className="scroll-mt-[calc(var(--header-size)_-_2px)]"
		>
			<ul class="flex flex-col items-center justify-center gap-8">
				{
					jobs.map((job) => (
						<li>
							<JobBubble client:load job={job} />
						</li>
					))
				}
			</ul>
		</Section>

		{/* Skills */}
		<Section title="Skills">
			<ul class="flex flex-wrap justify-center gap-8">
				{skills.map((tech) => <SkillBubble tech={tech} />)}
			</ul>
		</Section>

		{/* Contact */}
		<Section title="Contact Me">
			<ContactCard client:load />
		</Section>
	</main>
</Layout>
