name: CI

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch:
    inputs:
      update_snapshots:
        description: 'Update Playwright snapshots'
        required: false
        type: boolean
        default: false

jobs:
  dota-visualizer:
    uses: ./.github/workflows/ci-template.yml
    permissions:
      pull-requests: write
      contents: write
    with:
      app_name: 'dota-visualizer'
    secrets:
      VERCEL_PROJECT_ID: ${{ secrets.VERCEL_ID_DOTA_VISUALIZER }}
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      TURBO_TOKEN: ${{ secrets.TURBO_TOKEN }}
      VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}

  imdbgraph:
    uses: ./.github/workflows/ci-template.yml
    permissions:
      pull-requests: write
      contents: write
    with:
      app_name: 'imdbgraph'
    secrets:
      VERCEL_PROJECT_ID: ${{ secrets.VERCEL_ID_IMDBGRAPH }}
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      TURBO_TOKEN: ${{ secrets.TURBO_TOKEN }}
      VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}

  portfolio:
    uses: ./.github/workflows/ci-template.yml
    permissions:
      pull-requests: write
      contents: write
    with:
      app_name: 'portfolio'
    secrets:
      VERCEL_PROJECT_ID: ${{ secrets.VERCEL_ID_PORTFOLIO }}
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      TURBO_TOKEN: ${{ secrets.TURBO_TOKEN }}
      VERCEL_ORG_ID: ${{ secrets.VERCEL_ORG_ID }}
