name: apps/dota-visualizer

on:
  pull_request:
    types: [opened, synchronize]
    paths:
      - 'apps/dota-visualizer/**'
      - 'apps/dota-visualizer-e2e/**'
      - 'libs/**'
  push:
    branches:
      - main
    paths:
      - 'apps/dota-visualizer/**'
      - 'apps/dota-visualizer-e2e/**'
      - 'libs/**'

jobs:
  ci:
    permissions:
      contents: write
      pull-requests: write
    uses: ./.github/workflows/ci.yml
    with:
      app_name: 'dota-visualizer'
      vercel_project_id: 'prj_k4hqwb95voxcnozM1DY5zuL0rGHv'
      vercel_org_id: 'team_BMB11Zck0xVJiYVTGXOUqLiz'
      environment: ${{ github.ref == 'refs/heads/main' && 'production' || 'preview' }}
    secrets:
      VERCEL_TOKEN: ${{ secrets.VERCEL_TOKEN }}
      TURBO_TOKEN: ${{ secrets.TURBO_TOKEN }}
      DATABASE_URL: ${{ secrets.DATABASE_URL }}
