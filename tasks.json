{
	"tasks": [
		{
			"id": "1",
			"title": "CI Docker Build Stage",
			"description": "Add docker-build job to CI workflow that builds and pushes images for changed apps with sha-<shortsha> tags to Docker Hub.",
			"todo": [
				"Add docker-build job to .github/workflows/ci.yml (matrix per changed app)",
				"Login to Docker Hub using DOCKER_USERNAME/DOCKER_PASSWORD secrets",
				"Build with Dockerfile using APP_NAME build arg",
				"Push image tagged as sha-<short-sha> (immutable)",
				"Trigger Flux webhook after push for fast reconciliation"
			],
			"dependencies": [],
			"commitSha": "3e989bd7d5e8fe62cbd2141bf69ea1cca8499925",
			"done": true,
			"notes": "Added docker-build job to CI workflow that builds/pushes images for changed apps with sha-<sha> tags to Docker Hub and triggers Flux webhook",
			"blocked": false
		},
		{
			"id": "2",
			"title": "Flux Image Automation",
			"description": "Configure FluxCD ImageRepository, ImagePolicy, and ImageUpdateAutomation to detect new images and commit updated tags to staging branch.",
			"todo": [
				"Create packages/infra/manifests/gitops/image-automation/ directory",
				"Add ImageRepository per app (scan Docker Hub every 1m for sha-* tags)",
				"Add ImagePolicy per app (select latest by creation time)",
				"Add ImageUpdateAutomation to commit tag updates to staging branch",
				"Add Flux Receiver webhook for instant reconciliation after CI push"
			],
			"dependencies": [
				"1"
			],
			"commitSha": "f985891",
			"done": true,
			"notes": "Created FluxCD image automation with ImageRepository (scans Docker Hub every 1m), ImagePolicy (selects latest sha-* tag), ImageUpdateAutomation (commits tag updates to staging), and webhook receiver for instant reconciliation",
			"blocked": false
		},
		{
			"id": "3",
			"title": "K8s Manifest Updates",
			"description": "Update app kustomizations to use image policy markers and add image-automation path to Flux sync.",
			"todo": [
				"Update apps/*/k8s/kustomization.yaml image tags to use sha-* placeholder",
				"Add image-automation/ path to packages/infra/manifests/gitops/sync.yaml",
				"Verify Flux can update image tags in kustomization files"
			],
			"dependencies": [
				"2"
			],
			"commitSha": null,
			"done": false,
			"notes": ""
		},
		{
			"id": "4",
			"title": "Secrets & Testing",
			"description": "Configure required secrets and validate end-to-end flow.",
			"todo": [
				"Add DOCKER_USERNAME and DOCKER_PASSWORD to GitHub repo secrets",
				"Create Docker Hub access token with write permission",
				"Generate Flux webhook token and add to GitHub secrets",
				"Test: push to main → Docker build → Flux detects → Deployment updates"
			],
			"dependencies": [
				"3"
			],
			"commitSha": null,
			"done": false,
			"notes": ""
		}
	]
}
